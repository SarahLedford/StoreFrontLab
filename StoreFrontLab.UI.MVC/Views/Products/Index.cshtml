@model PagedList.IPagedList<StoreFrontLab.DATA.EF.Product>
@using PagedList.Mvc
@{
    ViewBag.Title = "Shop";
}

<h2>@ViewBag.Title</h2>
@if (User.IsInRole("Admin") || User.IsInRole("Employee"))
{
    <p>
        @Html.ActionLink("Add a New Product", "Create")
    </p>
}


<div class="row">
    <div class="col-sm-2">
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
    </div>

    <form method="get" action="/Products/Index" class="col-sm-3 offset-7 searchBox">
        <input type="text" name="searchFilter" placeholder="Title" />

        <input type="submit" value="Go!" class="btn btn-info" />
    </form>
</div>




@if (Model.Count() > 0)
{
    <table class="table" id="dataTable">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.FirstOrDefault().ProdName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FirstOrDefault().Price)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FirstOrDefault().Description)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.FirstOrDefault().ProductImage)
                </th>
                @*<th>
                        @Html.DisplayNameFor(model => model.FirstOrDefault().Artist.ArtistName)
                    </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.FirstOrDefault().Category.CategoryName)
                </th>
                @*<th>
                        @Html.DisplayNameFor(model => model.MovieGenre.MovieGenreName)
                    </th>*@
                @*<th>
                        @Html.DisplayNameFor(model => model.MusicGenre.MusicGenreName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Status.StatusName)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Studio.StudioName)
                    </th>*@
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.ProdName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Price)
                    </td>
                    <td class="description">
                        @Html.DisplayFor(modelItem => item.Description)
                    </td>
                    <td>
                        <img src="~/Content/img/shop/t_@item.ProductImage" alt="@item.ProdName cover" title="@item.ProdName" />
                        @*@Html.DisplayFor(modelItem => item.ProductImage)*@
                    </td>
                    @*<td>
                            @Html.DisplayFor(modelItem => item.Artist.ArtistName)
                        </td>*@
                    <td>
                        @Html.DisplayFor(modelItem => item.Category.CategoryName)
                    </td>
                    @*<td>
                            @Html.DisplayFor(modelItem => item.MovieGenre.MovieGenreName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.MusicGenre.MusicGenreName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status.StatusName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Studio.StudioName)
                        </td>*@
                    <td>
                        @if (User.IsInRole("Employee") || User.IsInRole("Admin"))
                        {
                            @:@Html.ActionLink("Edit", "Edit", new { id = item.ProdID }) |
                        }
                        @if (Request.IsAuthenticated)
                        {
                            @:@Html.ActionLink("More Info", "Details", new { id = item.ProdID })
                        }
                        @if (User.IsInRole("Admin"))
                        {
                            @:| @Html.ActionLink("Delete", "Delete", new { id = item.ProdID })
                        }
                    </td>
                </tr>
            }
        </tbody>

    </table>

}
else
{
    <p>Whoops! I couldn't find that. Try again -- I bet if you search the same thing, it'll show up this time!...</p>
}
Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

@Html.PagedListPager(Model, page => Url.Action("Index", new { page }))


@*@section scripts{
        <script>
            $(document).ready(function () {
                $('#dataTable').DataTable();
            });
        </script>
    }*@